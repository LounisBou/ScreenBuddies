# Phase 3.10: Finalization

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Run full test suite and verify all Phase 3 features work correctly.

**Architecture:** Comprehensive testing and verification.

**Tech Stack:** Pest

**Prerequisites:** Phase 3.9 complete

**Reference:** `docs/plans/phase-3-election-system.md` Task 10

---

## Task 1: Run Media Provider Tests

**Step 1: Run TMDB provider tests**

```bash
cd /Users/lounis/dev/ScreenBuddies/backend
php artisan test tests/Unit/Services/Media/TmdbProviderTest.php
```
Expected: All tests pass

**Step 2: Run RAWG provider tests**

```bash
php artisan test tests/Unit/Services/Media/RawgProviderTest.php
```
Expected: All tests pass

**Step 3: Run MediaSearchService tests**

```bash
php artisan test tests/Unit/Services/Media/MediaSearchServiceTest.php
```
Expected: All tests pass

---

## Task 2: Run Media Search Feature Tests

**Step 1: Run media search tests**

```bash
php artisan test tests/Feature/Media/MediaSearchTest.php
```
Expected: All tests pass

---

## Task 3: Run Election Service Tests

**Step 1: Run ElectionService tests**

```bash
php artisan test tests/Unit/Services/Election/ElectionServiceTest.php
```
Expected: All tests pass

---

## Task 4: Run Election Feature Tests

**Step 1: Run election CRUD tests**

```bash
php artisan test tests/Feature/Election/ElectionTest.php
```
Expected: All tests pass

**Step 2: Run join election tests**

```bash
php artisan test tests/Feature/Election/JoinElectionTest.php
```
Expected: All tests pass

---

## Task 5: Run Full Test Suite

**Step 1: Run all tests**

```bash
php artisan test
```
Expected: All tests pass

---

## Task 6: Static Analysis

**Step 1: Run PHPStan**

```bash
composer analyse
```
Expected: No errors

**Step 2: Run code style check**

```bash
composer format:check
```
Expected: No violations (run `composer format` if needed)

---

## Task 7: Final Commit

**Step 1: Check for uncommitted changes**

```bash
git status
```

**Step 2: Commit if needed**

```bash
git add . && git commit -m "chore: phase 3 complete - election system"
```

---

## Phase 3.10 Completion Checklist

- [ ] TMDB provider tests passing
- [ ] RAWG provider tests passing
- [ ] MediaSearchService tests passing
- [ ] Media search feature tests passing
- [ ] ElectionService tests passing
- [ ] Election CRUD tests passing
- [ ] Join election tests passing
- [ ] Full test suite passing
- [ ] Static analysis clean
- [ ] Code style clean
- [ ] Final commit created

---

## Phase 3 Complete

All election system components are now in place:

| Feature | Status |
|---------|--------|
| Election & Media Config | Complete |
| Circuit Breaker (Ganesha) | Complete |
| Media DTOs & Interface | Complete |
| TMDB Provider | Complete |
| RAWG Provider | Complete |
| MediaSearchService | Complete |
| Media Search Endpoints | Complete |
| ElectionService | Complete |
| Election CRUD | Complete |
| Join System | Complete |

---

## API Endpoints Summary

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | /api/v1/media/search | Search media by type |
| GET | /api/v1/media/{type}/{id} | Get media details |
| GET | /api/v1/elections | List user's elections |
| POST | /api/v1/elections | Create election |
| GET | /api/v1/elections/{uuid} | Get election details |
| PUT | /api/v1/elections/{uuid}/close | Close election |
| GET | /api/v1/elections/{uuid}/invite-link | Get invite link |
| GET | /api/v1/elections/join/{token} | Preview election (public) |
| POST | /api/v1/elections/join/{token} | Join election |

---

## Next Phase

Proceed to **Phase 4: Voting and Results** for vote submission and result calculation.
