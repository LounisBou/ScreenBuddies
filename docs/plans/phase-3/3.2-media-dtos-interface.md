# Phase 3.2: Media DTOs & Interface

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Create Data Transfer Objects and provider interface for media search.

**Architecture:** DTOs for clean data passing, interface for provider abstraction.

**Tech Stack:** PHP 8.3 readonly classes

**Prerequisites:** Phase 3.1 complete

**Reference:** `docs/plans/phase-3-election-system.md` Task 2

---

## Task 1: Create MediaItem DTO

**Step 1: Create MediaItem class**

Create `backend/app/Services/Media/DTOs/MediaItem.php`:
```php
<?php

namespace App\Services\Media\DTOs;

class MediaItem
{
    public function __construct(
        public string $externalId,
        public string $title,
        public ?string $posterUrl,
        public ?int $year,
        public array $metadata = []
    ) {}

    public function toArray(): array
    {
        return [
            'external_id' => $this->externalId,
            'title' => $this->title,
            'poster_url' => $this->posterUrl,
            'year' => $this->year,
            'metadata' => $this->metadata,
        ];
    }
}
```

**Step 2: Commit**

```bash
git add backend/app/Services/Media/DTOs/MediaItem.php
git commit -m "feat: add MediaItem DTO"
```

---

## Task 2: Create PaginatedResults DTO

**Step 1: Create PaginatedResults class**

Create `backend/app/Services/Media/DTOs/PaginatedResults.php`:
```php
<?php

namespace App\Services\Media\DTOs;

class PaginatedResults
{
    public function __construct(
        public array $items,
        public int $currentPage,
        public int $totalPages,
        public int $totalResults
    ) {}

    public function toArray(): array
    {
        return [
            'items' => array_map(fn (MediaItem $item) => $item->toArray(), $this->items),
            'current_page' => $this->currentPage,
            'total_pages' => $this->totalPages,
            'total_results' => $this->totalResults,
        ];
    }
}
```

**Step 2: Commit**

```bash
git add backend/app/Services/Media/DTOs/PaginatedResults.php
git commit -m "feat: add PaginatedResults DTO"
```

---

## Task 3: Create MediaProviderInterface

**Step 1: Create interface**

Create `backend/app/Services/Media/Contracts/MediaProviderInterface.php`:
```php
<?php

namespace App\Services\Media\Contracts;

use App\Services\Media\DTOs\MediaItem;
use App\Services\Media\DTOs\PaginatedResults;

interface MediaProviderInterface
{
    public function search(string $query, int $page = 1): PaginatedResults;

    public function getById(string $externalId): ?MediaItem;

    public function getType(): string;
}
```

**Step 2: Commit**

```bash
git add backend/app/Services/Media/Contracts/MediaProviderInterface.php
git commit -m "feat: add MediaProviderInterface contract"
```

---

## Phase 3.2 Completion Checklist

- [ ] MediaItem DTO with toArray()
- [ ] PaginatedResults DTO with toArray()
- [ ] MediaProviderInterface with search/getById/getType methods
- [ ] All commits created

---

## Next Sub-Phase

Proceed to **Phase 3.3: TMDB Provider** for movie/TV search.
