# Phase 2.9: Finalization

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Run full test suite and verify all Phase 2 features work correctly.

**Architecture:** Comprehensive testing and verification.

**Tech Stack:** Pest

**Prerequisites:** Phase 2.8 complete

**Reference:** `docs/plans/phase-2-auth-and-users.md` Task 9

---

## Task 1: Run All Auth Tests

**Step 1: Run auth tests**

```bash
cd /Users/lounis/dev/ScreenBuddies/backend
php artisan test tests/Feature/Auth/
```

Expected: All tests pass

---

## Task 2: Run All User Tests

**Step 1: Run user tests**

```bash
php artisan test tests/Feature/User/
```

Expected: All tests pass

---

## Task 3: Run All Friendship Tests

**Step 1: Run friendship tests**

```bash
php artisan test tests/Feature/Friendship/
```

Expected: All tests pass

---

## Task 4: Run Full Test Suite

**Step 1: Run all tests**

```bash
php artisan test
```

Expected: All tests pass

---

## Task 5: Static Analysis

**Step 1: Run PHPStan**

```bash
composer analyse
```

Expected: No errors

**Step 2: Run code style check**

```bash
composer format:check
```

Expected: No violations (run `composer format` if needed)

---

## Task 6: Manual API Testing (Optional)

**Step 1: Start server**

```bash
php artisan serve &
```

**Step 2: Test registration**

```bash
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email": "test@example.com", "password": "password123", "password_confirmation": "password123"}'
```

**Step 3: Test login**

```bash
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "test@example.com", "password": "password123"}'
```

**Step 4: Stop server**

```bash
pkill -f "php artisan serve"
```

---

## Task 7: Final Commit

**Step 1: Check for uncommitted changes**

```bash
git status
```

**Step 2: Commit if needed**

```bash
git add . && git commit -m "chore: phase 2 complete - auth and user management"
```

---

## Phase 2.9 Completion Checklist

- [ ] All auth tests passing
- [ ] All user tests passing
- [ ] All friendship tests passing
- [ ] Full test suite passing
- [ ] Static analysis clean
- [ ] Code style clean
- [ ] Final commit created

---

## Phase 2 Complete

All authentication and user management components are now in place:

| Feature | Status |
|---------|--------|
| API Exception Handling | Complete |
| User Registration | Complete |
| User Login | Complete |
| Token Refresh | Complete |
| Logout | Complete |
| User Profile | Complete |
| Password Change | Complete |
| Friendships | Complete |
| Email Verification | Complete |

---

## Next Phase

Proceed to **Phase 3: Election System** for election management.
